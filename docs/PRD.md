# 제품 요구사항 정의서 (PRD)
# 공학용 계산기 웹 애플리케이션

## 1. 제품 개요

### 1.1 제품 비전
강력한 수학 계산 기능과 우아하고 사용자 친화적인 인터페이스를 결합한 현대적이고 프리미엄한 공학용 계산기 웹 애플리케이션입니다. 이 계산기는 기본 및 고급 수학 함수에 빠르게 접근해야 하는 학생, 엔지니어, 과학자 및 전문가들에게 서비스를 제공합니다.

### 1.2 타겟 사용자
- **주요 사용자**: 수학, 물리학, 공학을 공부하는 고등학생 및 대학생
- **부차 사용자**: 전문 엔지니어, 과학자 및 연구원
- **3차 사용자**: 과학 계산이 필요한 모든 사람

### 1.3 핵심 목표
- 모든 웹 브라우저에서 접근 가능한 완전한 기능의 공학용 계산기 제공
- 부드러운 애니메이션과 반응형 디자인으로 프리미엄하고 현대적인 사용자 경험 제공
- 기본 산술 연산과 고급 과학 함수 모두 지원
- 단위 변환 기능 지원
- 참조를 위한 계산 히스토리 유지

---

## 2. 디자인 시스템 및 시각적 아이덴티티

### 2.1 색상 팔레트
제공된 디자인을 기반으로 애플리케이션은 세련된 다크 테마를 사용합니다:

| 색상 이름 | Hex 코드 | 용도 |
|----------|---------|------|
| Primary Blue | `#137fec` | 활성 버튼, 하이라이트, 강조 요소 |
| Background Dark | `#101922` | 메인 배경 |
| Surface Dark | `#1c242d` | 상승된 표면, 키패드 배경 |
| Keypad Surface | `#151e27` | 메인 키패드 컨테이너 |
| Key Number | `#1e252d` | 숫자 버튼 배경 |
| Key Operator | `#283039` | 연산자 버튼 배경 |
| Background Light | `#f6f7f8` | 라이트 모드 배경 (향후) |

### 2.2 타이포그래피
- **주요 폰트**: Space Grotesk (굵기: 300, 400, 500, 600, 700)
- **디스플레이 크기**: 메인 결과 표시용 56-64px
- **수식 크기**: 수식 히스토리용 20-24px
- **버튼 텍스트**: 다양한 크기 (칩용 11px, 과학 키용 14px, 메인 키용 20-24px)

### 2.3 디자인 원칙
- **프리미엄 느낌**: 미묘한 그림자, 부드러운 전환, 세련된 색상 선택
- **다크 모드 우선**: 장시간 사용 시 눈의 피로 감소에 최적화
- **반응형**: 다양한 화면 크기에 원활하게 적응
- **촉각 피드백**: 버튼 누름 시 활성 상태 및 스케일 애니메이션
- **시각적 계층**: 디스플레이, 컨트롤 및 입력 영역 간 명확한 구분

### 2.4 UI 컴포넌트

#### 디스플레이 영역
- **수식 뷰**: 현재 계산 표현식을 40% 불투명도로 표시
- **결과 뷰**: 현재 결과 또는 입력의 크고 굵은 표시
- **정렬**: 자연스러운 읽기 흐름을 위한 오른쪽 정렬

#### 네비게이션 헤더
- **메뉴 버튼**: 왼쪽 정렬 햄버거 메뉴 아이콘
- **모드 전환기**: 중앙 정렬 알약 스타일 토글 (CALC/UNIT 모드)
- **히스토리 버튼**: 오른쪽 정렬 히스토리 아이콘

#### 컨트롤 바
- **각도 모드 토글**: DEG/RAD 선택 칩
- **백스페이스**: 입력 수정을 위한 전용 삭제 버튼

#### 키패드 레이아웃
- **과학 함수 행**: 2행 × 5열 (sin, cos, tan, π, √, ln, log, e, (, ))
- **구분선**: 과학 함수와 기본 함수 사이의 시각적 구분선
- **메인 그리드**: 혼합 행 스팬이 있는 4열
  - 1행: AC, %, ÷, ×
  - 2행: 7, 8, 9, −
  - 3행: 4, 5, 6, +
  - 4행: 1, 2, 3, = (row-span-2)
  - 5행: 0 (col-span-2), ., = (계속)

---

## 3. 기능 요구사항

### 3.1 핵심 계산기 기능

#### 3.1.1 기본 산술 연산
- **덧셈** (+): 두 개 이상의 숫자 더하기
- **뺄셈** (−): 숫자 빼기
- **곱셈** (×): 숫자 곱하기
- **나눗셈** (÷): 0으로 나누기 오류 처리와 함께 숫자 나누기
- **백분율** (%): 백분율 계산
- **소수점** (.): 소수 입력 지원

#### 3.1.2 과학 함수

| 함수 | 기호 | 설명 |
|------|------|------|
| 사인 | sin | 삼각함수 사인 |
| 코사인 | cos | 삼각함수 코사인 |
| 탄젠트 | tan | 삼각함수 탄젠트 |
| 자연로그 | ln | 자연로그 (밑 e) |
| 상용로그 | log | 상용로그 (밑 10) |
| 제곱근 | √ | 제곱근 계산 |
| 파이 | π | 수학 상수 π (3.14159...) |
| 오일러 수 | e | 수학 상수 e (2.71828...) |
| 괄호 | ( ) | 연산 순서를 위한 그룹화 |

#### 3.1.3 입력 및 디스플레이
- **숫자 입력**: 정수 및 소수 지원
- **수식 디스플레이**: 현재 계산 표현식 표시
- **결과 디스플레이**: 적절한 형식으로 계산된 결과 표시
- **숫자 형식**: 천 단위 쉼표 구분 (예: 1,234.56)
- **정밀도**: 최대 10자리 소수점 표시, 매우 크거나 작은 숫자는 과학적 표기법 사용

#### 3.1.4 제어 함수
- **전체 지우기 (AC)**: 계산기를 초기 상태로 재설정
- **백스페이스**: 마지막으로 입력한 문자 삭제
- **등호 (=)**: 계산 실행 및 결과 표시

### 3.2 각도 모드

#### 3.2.1 도 모드 (DEG)
- 삼각함수의 기본 모드
- 각도를 도 단위로 해석 (0-360°)

#### 3.2.2 라디안 모드 (RAD)
- 삼각함수의 대체 모드
- 각도를 라디안 단위로 해석 (0-2π)

### 3.3 모드 전환

#### 3.3.1 계산기 모드 (CALC)
- 공학용 계산기 인터페이스를 표시하는 기본 모드
- 모든 수학 함수 사용 가능

#### 3.3.2 단위 변환 모드 (UNIT)
- 단위 변환을 위한 대체 모드
- 포함할 카테고리:
  - 길이 (m, km, ft, in, mi 등)
  - 무게 (kg, g, lb, oz 등)
  - 온도 (°C, °F, K)
  - 부피 (L, mL, gal, cup 등)
  - 면적 (m², ft², acre 등)
  - 속도 (km/h, mph, m/s 등)

### 3.4 히스토리 기능

#### 3.4.1 계산 히스토리
- 이전 계산을 시간순으로 저장
- 각 항목에 대한 수식 및 결과 표시
- 사용자가 히스토리 항목을 탭하여 불러오기 가능
- 히스토리 지우기 옵션

#### 3.4.2 히스토리 패널
- 오른쪽에서 슬라이드인 패널
- 이전 계산의 스크롤 가능한 목록
- 계산기로 돌아가기 위한 닫기 버튼

### 3.5 메뉴 기능

#### 3.5.1 설정
- 테마 선택 (다크/라이트/자동)
- 소수점 자릿수 기본 설정
- 각도 모드 기본값 (DEG/RAD)
- 효과음 토글
- 햅틱 피드백 토글 (모바일)

#### 3.5.2 정보
- 앱 버전 정보
- 크레딧 및 저작권 표시
- 도움말/튜토리얼 링크

---

## 4. 기술 요구사항

### 4.1 기술 스택

#### 4.1.1 프론트엔드
- **HTML5**: 시맨틱 마크업
- **CSS3**: Tailwind CSS 프레임워크를 사용한 커스텀 스타일링
- **JavaScript (ES6+)**: 핵심 계산 로직 및 상호작용
- **Math.js** 또는 **Decimal.js**: 정밀한 수학 계산

#### 4.1.2 폰트 및 아이콘
- **Google Fonts**: Space Grotesk 폰트 패밀리
- **Material Symbols**: UI 요소용 아이콘 세트

#### 4.1.3 빌드 도구 (선택사항)
- **Vite** 또는 **Webpack**: 모듈 번들링 및 개발 서버
- **PostCSS**: CSS 처리 및 최적화

### 4.2 브라우저 호환성
- **최신 브라우저**: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- **모바일 브라우저**: iOS Safari 14+, Chrome Mobile 90+
- **반응형 브레이크포인트**:
  - 모바일: 320px - 767px
  - 태블릿: 768px - 1023px
  - 데스크톱: 1024px+

### 4.3 성능 요구사항
- **초기 로드 시간**: 3G 연결에서 < 2초
- **계산 응답**: 모든 연산에 대해 < 100ms
- **애니메이션 프레임 속도**: 모든 전환에 대해 60 FPS
- **번들 크기**: < 500KB (축소 및 gzip 압축)

### 4.4 접근성 (WCAG 2.1 Level AA)
- **키보드 탐색**: 가시적인 포커스 표시기가 있는 완전한 키보드 지원
- **스크린 리더 지원**: 모든 상호작용 요소에 대한 ARIA 레이블
- **색상 대비**: 텍스트에 대해 최소 4.5:1 비율
- **포커스 관리**: 논리적인 탭 순서
- **대체 입력**: 키보드 숫자 패드 지원

### 4.5 데이터 지속성
- **로컬 스토리지**: 계산 히스토리 저장 (최근 50개 계산)
- **설정 스토리지**: 사용자 기본 설정 유지
- **세션 상태**: 페이지 새로고침 시 현재 계산 유지

---

## 5. 사용자 경험 (UX) 요구사항

### 5.1 상호작용 디자인

#### 5.1.1 버튼 상호작용
- **호버 상태**: 색상 변경 및 미묘한 밝기 증가
- **활성 상태**: 축소 애니메이션 (scale-95)
- **전환**: 부드러운 200-300ms 전환
- **피드백**: 모든 버튼 누름에 대한 시각적 확인

#### 5.1.2 디스플레이 동작
- **자동 스크롤**: 가장 최근 입력을 표시하기 위해 디스플레이 스크롤
- **잘림**: 긴 숫자는 말줄임표 또는 과학적 표기법 사용
- **오류 상태**: 명확한 오류 메시지 (예: "0으로 나눌 수 없음", "잘못된 입력")

#### 5.1.3 계산 흐름
1. 사용자가 숫자와 연산자 입력
2. 수식 뷰에 표현식 표시
3. 사용자가 등호 누름
4. 결과가 메인 디스플레이에 애니메이션으로 표시
5. 이전 표현식이 불투명도가 감소된 수식 뷰로 이동

### 5.2 반응형 동작

#### 5.2.1 모바일 (< 768px)
- 전체 화면 계산기 인터페이스
- 터치에 최적화된 버튼 크기 (최소 44×44px)
- 히스토리 패널을 위한 스와이프 제스처
- 메뉴를 위한 하단 시트

#### 5.2.2 태블릿 (768px - 1023px)
- 최대 너비 제약이 있는 중앙 정렬 계산기
- 약간 더 큰 버튼 및 텍스트
- 히스토리를 위한 사이드 패널

#### 5.2.3 데스크톱 (1024px+)
- 최대 너비 600px의 중앙 정렬 계산기
- 호버 상태 완전 기능
- 키보드 단축키 활성화

### 5.3 키보드 단축키

| 키 | 동작 |
|----|------|
| 0-9 | 숫자 입력 |
| +, -, *, / | 연산자 |
| Enter | 계산 (=) |
| Backspace | 마지막 문자 삭제 |
| Escape | 전체 지우기 (AC) |
| . | 소수점 |
| ( ) | 괄호 |

---

## 6. 계산 로직 요구사항

### 6.1 연산 순서
- 표준 수학 순서 준수 (PEMDAS/BODMAS)
- 괄호 → 지수 → 곱셈/나눗셈 → 덧셈/뺄셈

### 6.2 오류 처리

| 오류 유형 | 사용자 메시지 | 동작 |
|----------|-------------|------|
| 0으로 나누기 | "0으로 나눌 수 없습니다" | 결과 지우기, 수식 유지 |
| 잘못된 수식 | "잘못된 수식입니다" | 오류 강조, 수정 허용 |
| 오버플로우 | "숫자가 너무 큽니다" | 과학적 표기법으로 표시 |
| 정의되지 않은 결과 | "수학 오류" | 지우기 및 재설정 |

### 6.3 엣지 케이스
- **앞자리 0**: 자동 제거 (0.x 제외)
- **여러 소수점**: 하나의 숫자에 여러 소수점 방지
- **연산자 시퀀스**: 여러 연산자를 지능적으로 처리 (마지막 것이 우선)
- **빈 수식**: 빈 입력에서 등호는 아무 작업도 하지 않음
- **불완전한 수식**: 자동 완성 또는 오류 표시

---

## 7. 향후 개선사항 (Phase 2+)

### 7.1 고급 기능
- **그래프 계산기**: 좌표 평면에 함수 그리기
- **행렬 연산**: 행렬 계산 지원
- **복소수**: i 표기법 및 복소수 산술
- **프로그래밍 가능한 함수**: 사용자 정의 커스텀 함수
- **방정식 풀이**: 대수 방정식에서 x 풀기

### 7.2 협업 기능
- **계산 공유**: 계산에 대한 공유 가능한 링크 생성
- **히스토리 내보내기**: 계산 히스토리를 CSV/PDF로 다운로드
- **클라우드 동기화**: 기기 간 히스토리 및 설정 동기화

### 7.3 교육 기능
- **단계별 풀이**: 계산 단계 표시
- **공식 참조**: 내장 공식 라이브러리
- **연습 문제**: 대화형 수학 문제

### 7.4 커스터마이징
- **커스텀 테마**: 사용자 생성 색상 구성
- **레이아웃 옵션**: 대체 버튼 레이아웃
- **버튼 커스터마이징**: 자주 사용하는 함수 재배열

---

## 8. 성공 지표

### 8.1 사용자 참여
- **일일 활성 사용자 (DAU)**: 3개월 내 10,000+ 목표
- **세션 지속 시간**: 세션당 평균 3-5분
- **재방문율**: 주간 재방문율 40%+

### 8.2 성능 지표
- **페이지 로드 시간**: < 2초 (95번째 백분위수)
- **오류율**: 계산의 < 0.1%
- **충돌률**: < 0.01%

### 8.3 사용자 만족도
- **사용자 평가**: 4.5+ 별점 (PWA로 게시된 경우)
- **순추천고객지수 (NPS)**: 50+
- **작업 완료율**: 기본 계산에 대해 95%+

---

## 9. 개발 단계

### Phase 1: MVP (1-3주차)
- [ ] 프로젝트 구조 및 개발 환경 설정
- [ ] UI 레이아웃 및 디자인 시스템 구현
- [ ] 기본 산술 연산 구축 (+, −, ×, ÷)
- [ ] 숫자 입력 및 디스플레이 기능 추가
- [ ] AC 및 백스페이스 함수 구현
- [ ] 등호 버튼 및 계산 로직 추가
- [ ] 모바일 및 데스크톱용 반응형 디자인

### Phase 2: 과학 함수 (4-5주차)
- [ ] 삼각함수 구현 (sin, cos, tan)
- [ ] 로그 함수 추가 (ln, log)
- [ ] 제곱근 및 상수 구현 (π, e)
- [ ] 괄호 지원 추가
- [ ] DEG/RAD 모드 전환 구현
- [ ] 백분율 계산 추가

### Phase 3: 향상된 기능 (6-7주차)
- [ ] 계산 히스토리 기능 구축
- [ ] 히스토리 패널 UI 구현
- [ ] 히스토리 지속성을 위한 로컬 스토리지 추가
- [ ] 단위 변환 모드 생성
- [ ] 모드 전환 구현 (CALC/UNIT)

### Phase 4: 다듬기 및 최적화 (8주차)
- [ ] 키보드 단축키 추가
- [ ] 접근성 기능 구현
- [ ] 성능 및 번들 크기 최적화
- [ ] 크로스 브라우저 테스트
- [ ] 사용자 테스트 및 버그 수정

### Phase 5: 출시 준비 (9주차)
- [ ] 최종 QA 테스트
- [ ] 문서 및 도움말 콘텐츠
- [ ] SEO 최적화
- [ ] 배포 설정
- [ ] 분석 통합

---

## 10. 디자인 참조

### 10.1 시각적 디자인
애플리케이션은 Stitch 디자인 파일에 제공된 디자인 사양을 따릅니다:

![계산기 디자인 참조](C:\Users\USER\.gemini\antigravity\brain\05112371-66d1-44ca-a6d1-d22a3f9305f4\calculator_design.png)

### 10.2 주요 디자인 요소
- **앰비언트 조명**: 깊이와 프리미엄 느낌을 위한 부드러운 파란색 그라디언트 글로우
- **그림자**: 촉각적 외관을 위한 버튼의 미묘한 그림자
- **테두리 반경**: 일관된 둥근 모서리 (0.5rem - 1.5rem)
- **간격**: 편안한 터치 타겟을 위한 넉넉한 패딩 및 간격
- **고도**: 미묘한 테두리 및 그림자가 있는 레이어드 표면

---

## 11. 제약사항 및 가정

### 11.1 제약사항
- 초기 로드 후 오프라인에서 작동해야 함 (PWA 기능)
- 핵심 기능에 백엔드 서버 불필요
- 앱 설치 없이 기기에서 접근 가능해야 함
- 클라이언트 측 계산으로 제한 (서버 측 계산 없음)

### 11.2 가정
- 사용자는 JavaScript가 활성화된 최신 브라우저를 사용
- 사용자는 계산기 작동에 대한 기본적인 이해가 있음
- 초기 로드를 위한 인터넷 연결 가능
- 사용자는 계산기 애플리케이션에 다크 모드를 선호
- 모바일 사용자가 트래픽의 60% 이상을 차지

---

## 12. 위험 및 완화

| 위험 | 영향 | 확률 | 완화 전략 |
|------|------|------|----------|
| 부동소수점 정밀도 오류 | 높음 | 높음 | decimal.js 또는 math.js 라이브러리 사용 |
| 브라우저 호환성 문제 | 중간 | 중간 | 포괄적인 크로스 브라우저 테스트 |
| 구형 기기의 성능 | 중간 | 낮음 | 코드 최적화 및 지연 로딩 |
| 과학 함수에 대한 사용자 혼란 | 중간 | 중간 | 툴팁 및 도움말 문서 |
| 접근성 규정 준수 | 높음 | 낮음 | WCAG 2.1 감사 및 테스트 |

---

## 13. 부록

### 13.1 용어집
- **DEG**: 각도 측정을 위한 도 모드
- **RAD**: 각도 측정을 위한 라디안 모드
- **PEMDAS**: 연산 순서 (괄호, 지수, 곱셈/나눗셈, 덧셈/뺄셈)
- **PWA**: 프로그레시브 웹 앱
- **WCAG**: 웹 콘텐츠 접근성 지침

### 13.2 참고자료
- 디자인 파일: `docs/stitch_design/`
- Math.js 문서: https://mathjs.org/
- Tailwind CSS: https://tailwindcss.com/
- Material Symbols: https://fonts.google.com/icons

### 13.3 개정 이력

| 버전 | 날짜 | 작성자 | 변경사항 |
|------|------|--------|---------|
| 1.0 | 2025-12-23 | Initial | Stitch 디자인 기반 초안 작성 |

---

## 14. 승인

이 PRD는 다음의 승인이 필요합니다:
- [ ] 제품 책임자
- [ ] 리드 개발자
- [ ] UX/UI 디자이너
- [ ] QA 리드

**문서 상태**: 초안  
**최종 업데이트**: 2025-12-23  
**다음 검토**: Phase 1 개발 시작 전
